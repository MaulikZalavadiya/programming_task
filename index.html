<!DOCTYPE html>
<html>

<head>
    <title>Text to Speech and Speech to Text</title>
</head>

<body>
    <h2>Text to Speech</h2>
    <textarea id="text" rows="4" cols="50">Enter text here...</textarea>
    <br>
    <label for="tts-lang">Language: </label>
    <select id="tts-lang">
        <option value="en">English</option>
        <option value="es">Spanish</option>
        <option value="fr">French</option>
        <!-- Add more languages as needed -->
    </select>
    <br>
    <button onclick="textToSpeech()">Convert to Speech</button>
    <audio id="audio" controls></audio>

    <h2>Speech to Text</h2>
    <input type="file" id="audioFile" accept="audio/*">
    <br>
    <button onclick="speechToText()">Convert to Text</button>
    <p id="result">Recognized text will appear here...</p>

    <script>
        function textToSpeech() {
            var text = document.getElementById("text").value;
            var lang = document.getElementById("tts-lang").value;
            var formData = new FormData();
            formData.append("text", text);
            formData.append("lang", lang);

            fetch('/tts', {
                method: 'POST',
                body: formData
            })
                .then(response => response.blob())
                .then(blob => {
                    var url = URL.createObjectURL(blob);
                    var audio = document.getElementById("audio");
                    audio.src = url;
                    audio.play();
                });
        }

        function speechToText() {
            var audioFile = document.getElementById("audioFile").files[0];
            var formData = new FormData();
            formData.append("file", audioFile);

            fetch('/stt', {
                method: 'POST',
                body: formData
            })
                .then(response => response.json())
                .then(data => {
                    document.getElementById("result").innerText = data.text + ' (Detected Language: ' + data.lang + ')';
                });
        }
    </script>
</body>

</html>